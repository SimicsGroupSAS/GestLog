<Window x:Class="GestLog.Modules.GestionEquiposInformaticos.Views.Mantenimiento.DetallesMantenimientoWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:conv="clr-namespace:GestLog.Converters"
        mc:Ignorable="d"
        Title="Detalles del Mantenimiento"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        SizeToContent="Manual"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True"
        d:DesignHeight="600" d:DesignWidth="700">    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Modules/GestionEquiposInformaticos/Views/Equipos/ModalWindowsStandard.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <conv:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            <conv:InverseBooleanConverter x:Key="InverseBooleanConverter" />
            <conv:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />
            <conv:DateDifferenceToStringConverter x:Key="DateDifferenceToStringConverter" />
            <conv:DateAddDaysConverter x:Key="DateAddDaysConverter" />

            <Style x:Key="DetailLabelStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="#666666"/>
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="FontWeight" Value="Normal"/>
                <Setter Property="Margin" Value="0,0,0,4"/>
            </Style>

            <Style x:Key="DetailValueStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="#333333"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Margin" Value="0,0,0,12"/>
                <Setter Property="TextWrapping" Value="Wrap"/>
            </Style>

            <Style x:Key="CloseButton" TargetType="Button">
                <Setter Property="MinHeight" Value="36" />
                <Setter Property="Padding" Value="24,6" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Background" Value="#E0E0E0" />
                <Setter Property="Foreground" Value="#333333" />
                <Setter Property="FontWeight" Value="SemiBold" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" CornerRadius="8" SnapsToDevicePixels="True">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>    <Grid x:Name="RootGrid" Background="#80000000" MouseLeftButtonDown="Overlay_MouseLeftButtonDown">
        <Border x:Name="Card" Width="750" MaxHeight="680"
                Background="{StaticResource SurfaceBrush}"
                CornerRadius="8" Padding="0"
                HorizontalAlignment="Center" VerticalAlignment="Center"
                BorderThickness="1" BorderBrush="{StaticResource BorderBrush}"
                Effect="{StaticResource WindowShadow}" MouseLeftButtonDown="Panel_MouseLeftButtonDown">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Border Grid.Row="0" Background="{StaticResource PrimaryBrush}" CornerRadius="8,8,0,0" Padding="24,16">
                    <DockPanel>
                        <StackPanel DockPanel.Dock="Left" Orientation="Horizontal" VerticalAlignment="Center">
                            <Border Background="White" CornerRadius="6" Padding="6" Margin="0,0,16,0" Width="36" Height="36">
                                <TextBlock Text="" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="Detalles del Mantenimiento" Style="{StaticResource HeaderTextStyle}"/>
                                <TextBlock Text="Informaci贸n completa del mantenimiento realizado" Style="{StaticResource SubHeaderTextStyle}" Margin="0,3,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </DockPanel>
                </Border>                <!-- Contenido principal -->
                <ScrollViewer Grid.Row="1" Padding="24" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <StackPanel>
                        <!-- Secci贸n 1: Informaci贸n del Equipo -->
                        <TextBlock Text=" Equipo Afectado" FontWeight="SemiBold" Margin="0,0,0,14" Foreground="#333333" FontSize="14"/>
                        
                        <Border Background="#F9FAFB" CornerRadius="8" Padding="18" Margin="0,0,0,24" BorderThickness="1" BorderBrush="#E5E7EB">
                            <StackPanel>
                                <StackPanel Margin="0,0,0,14">
                                    <TextBlock Text="C贸digo del Equipo" Style="{StaticResource DetailLabelStyle}"/>
                                    <TextBlock Text="{Binding Mantenimiento.Codigo}" Style="{StaticResource DetailValueStyle}"/>
                                </StackPanel>

                                <StackPanel>
                                    <TextBlock Text="Descripci贸n de la Falla" Style="{StaticResource DetailLabelStyle}"/>
                                    <TextBlock Text="{Binding Mantenimiento.DescripcionFalla}" Style="{StaticResource DetailValueStyle}" MinHeight="60" FontSize="12"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- Secci贸n 2: Cronolog铆a -->
                        <TextBlock Text=" Cronolog铆a del Mantenimiento" FontWeight="SemiBold" Margin="0,0,0,14" Foreground="#333333" FontSize="14"/>
                        
                        <Grid Margin="0,0,0,24">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Fila 1 -->
                            <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,12,0">
                                <TextBlock Text="Estado Actual" Style="{StaticResource DetailLabelStyle}"/>
                                <TextBlock Text="{Binding Mantenimiento.Estado}" Style="{StaticResource DetailValueStyle}" FontSize="12"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Grid.Row="0" Margin="0,0,12,0">
                                <TextBlock Text="Fecha de Inicio" Style="{StaticResource DetailLabelStyle}"/>
                                <TextBlock Text="{Binding Mantenimiento.FechaInicio, StringFormat='dd/MM/yyyy'}" Style="{StaticResource DetailValueStyle}" FontSize="12"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2" Grid.Row="0">
                                <TextBlock Text="Fecha Completado" Style="{StaticResource DetailLabelStyle}"/>
                                <TextBlock Text="{Binding Mantenimiento.FechaCompletado, StringFormat='dd/MM/yyyy'}" Style="{StaticResource DetailValueStyle}" FontSize="12"/>
                            </StackPanel>

                            <!-- Fila 2 -->
                            <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,0,12,0">
                                <TextBlock Text="Duraci贸n Total" Style="{StaticResource DetailLabelStyle}"/>
                                <TextBlock Text="{Binding DuracionTotalDias, StringFormat='0 \\ d铆as'}" Style="{StaticResource DetailValueStyle}" FontSize="12" Foreground="#118938"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Grid.Row="1" Margin="0,0,12,0">
                                <TextBlock Text="Per铆odo de Garant铆a" Style="{StaticResource DetailLabelStyle}"/>
                                <TextBlock Text="{Binding Mantenimiento.PeriodoGarantia, StringFormat='0 \\ d铆as'}" Style="{StaticResource DetailValueStyle}" FontSize="12"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2" Grid.Row="1">
                                <TextBlock Text="Vencimiento Garant铆a" Style="{StaticResource DetailLabelStyle}"/>
                                <TextBlock Text="{Binding FechaVencimientoGarantia, StringFormat='dd/MM/yyyy'}" Style="{StaticResource DetailValueStyle}" FontSize="12" Foreground="#C0392B"/>
                            </StackPanel>
                        </Grid>

                        <!-- Secci贸n 3: Detalles de Reparaci贸n -->
                        <TextBlock Text=" Detalles de Reparaci贸n" FontWeight="SemiBold" Margin="0,0,0,14" Foreground="#333333" FontSize="14"/>
                        
                        <Border Background="#F9FAFB" CornerRadius="8" Padding="18" Margin="0,0,0,24" BorderThickness="1" BorderBrush="#E5E7EB">
                            <StackPanel>
                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                        <TextBlock Text="Proveedor" Style="{StaticResource DetailLabelStyle}"/>
                                        <TextBlock Text="{Binding Mantenimiento.ProveedorAsignado}" Style="{StaticResource DetailValueStyle}" FontSize="12"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Costo de Reparaci贸n" Style="{StaticResource DetailLabelStyle}"/>
                                        <TextBlock Text="{Binding Mantenimiento.CostoReparacion, StringFormat='C'}" Style="{StaticResource DetailValueStyle}" FontSize="12" Foreground="#059669" FontWeight="Bold"/>
                                    </StackPanel>
                                </Grid>

                                <Border BorderThickness="0,1,0,0" BorderBrush="#E5E7EB" Padding="0,16,0,0" Margin="0">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                            <TextBlock Text="Estado de Garant铆a" Style="{StaticResource DetailLabelStyle}"/>
                                            <TextBlock Style="{StaticResource DetailValueStyle}" FontSize="12">
                                                <Run Text=" Vigente" Foreground="#059669"/>
                                            </TextBlock>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="Fecha de Vencimiento" Style="{StaticResource DetailLabelStyle}"/>
                                            <TextBlock Text="{Binding FechaVencimientoGarantia, StringFormat='dd/MM/yyyy'}" Style="{StaticResource DetailValueStyle}" FontSize="12"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </StackPanel>
                        </Border>

                        <!-- Secci贸n 4: Historial de Observaciones -->
                        <TextBlock Text=" Historial de Observaciones" FontWeight="SemiBold" Margin="0,0,0,14" Foreground="#333333" FontSize="14"/>
                        <Border Background="#FAFBFC" CornerRadius="8" Padding="16" Margin="0,0,0,16" MinHeight="120" BorderThickness="1" BorderBrush="#E5E7EB">
                            <TextBlock Text="{Binding Mantenimiento.Observaciones}" 
                                       Foreground="#333333" 
                                       VerticalAlignment="Top" 
                                       TextWrapping="Wrap" 
                                       FontFamily="Courier New" 
                                       FontSize="11"
                                       LineHeight="18"/>
                        </Border>
                    </StackPanel>
                </ScrollViewer>

                <!-- Botones de acci贸n -->
                <Border Grid.Row="2" Background="{StaticResource SurfaceElevatedBrush}" CornerRadius="0,0,8,8" Padding="24,16" BorderThickness="0,1,0,0" BorderBrush="{StaticResource BorderBrush}">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="CloseButton" 
                                Content="Cerrar" 
                                Style="{StaticResource CloseButton}"
                                Click="CloseButton_Click"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Window>
